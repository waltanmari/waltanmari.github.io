!function(t){var e={_ie:function(){for(var t,e=3,i=document.createElement("div"),n=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:t}(),_svg_cache:{},_create_svg_element:function(t,e){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,t);for(key in e)n.setAttributeNS(null,key,e[key]);return n},_create_svg:function(t,e){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg");n.setAttributeNS(null,"width","0"),n.setAttributeNS(null,"height","0"),n.setAttributeNS(null,"style","position:absolute");var s=document.createElementNS(i,"filter");s.setAttributeNS(null,"id",t),n.appendChild(s);for(var a=0;a<e.length;a++)s.appendChild(e[a]);return n},_pending_stylesheets:0,_stylesheets:[],_development_mode:function(){return"localhost"===location.hostname||-1!==location.hostname.search(/.local$/)||-1!==location.hostname.search(/\d+\.\d+\.\d+\.\d+/)?(t.console&&console.log("Detected localhost or IP address. Assuming you are a developer. Caching of stylesheets is disabled."),!0):(t.console&&console.log("Caching of stylesheets is enabled. You need to refresh twice to see any changes."),!1)}(),process_stylesheets:function(){var i=[];t.setTimeout(function(){if(t.XMLHttpRequest)var e=new XMLHttpRequest;else if(t.ActiveXObject)var e=new ActiveXObject("Microsoft.XMLHTTP");e.open("GET",t.polyfilter_scriptpath+"htc/sepia.htc",!0),e.onreadystatechange=function(){4==i.readyState&&200!=i.status&&alert('The configured path \r\rvar polyfilter_scriptpath = "'+t.polyfilter_scriptpath+'"\r\rseems wrong!\r\rConfigure the polyfill\'s correct absolute(!) script path before referencing the css-filters-polyfill.js, like so:\r\rvar polyfilter_scriptpath = "/js/css-filters-polyfill/";\r\rLeaving IE dead in the water is no option. You damn Mac user... ;)')};try{e.send(null)}catch(n){}},2e3);for(var n=document.querySelectorAll?document.querySelectorAll('style,link[rel="stylesheet"]'):document.getElementsByTagName("*"),s=0;s<n.length;s++)!function(i){switch(n[i].nodeName){default:break;case"STYLE":e._stylesheets.push({media:n[i].media||"all",content:n[i].innerHTML});break;case"LINK":if("stylesheet"===n[i].rel){var s=e._stylesheets.length;e._stylesheets.push({media:n[i].media||"all"}),e._pending_stylesheets++;var a=n[i].href;!e._development_mode&&t.localStorage&&t.localStorage.getItem("polyfilter_"+a)&&(e._pending_stylesheets--,e._stylesheets[s].content=localStorage.getItem("polyfilter_"+a),0===e._pending_stylesheets&&e.process());try{if(t.XMLHttpRequest)var o=new XMLHttpRequest;else if(t.ActiveXObject)var o=new ActiveXObject("Microsoft.XMLHTTP");o.open("GET",a,!0),o.onreadystatechange=function(){if(4===o.readyState)if(0===o.status)t.console&&console.log("Could not fetch external CSS via HTTP-Request "+a+". Probably because of cross origin."),e._stylesheets[s].content||(e._pending_stylesheets--,e._stylesheets[s].content=o.responseText,0===e._pending_stylesheets&&e.process());else if(e._stylesheets[s].content||(e._pending_stylesheets--,e._stylesheets[s].content=o.responseText,0===e._pending_stylesheets&&e.process()),!e._development_mode&&t.localStorage)try{t.localStorage.setItem("polyfilter_"+a,e._stylesheets[s].content)}catch(i){t.console&&console.log("Local storage quota have been exceeded. Caching of stylesheet "+a+" is not possible")}};try{o.send(null)}catch(r){t.console&&console.log("Could not fetch external CSS via HTTP-Request "+a+". Are you maybe testing using the file://-protocol?"),e._stylesheets[s].content||(e._pending_stylesheets--,0===e._pending_stylesheets&&e.process())}}catch(r){}}}}(s);0===this._pending_stylesheets&&this.process()},_processDeclarations:function(t){var i="";for(var n in t.declarations){var s=t.declarations[n];if("filter"===s.property){if(document.querySelectorAll)for(var a=document.querySelectorAll(t.mSelectorText),n=0;n<a.length;n++)a[n].style.polyfilterStore=s.valueText;var o=s.valueText,r=o.split(/\)\s+/),l={filtersW3C:[],filtersWebKit:[],filtersSVG:[],filtersIE:[],behaviorsIE:[]};for(idx in r){var c=r[idx]+")";currentproperties=e.convert(c);for(key in currentproperties)"undefined"!=typeof l[key]&&(l[key]=l[key].concat(currentproperties[key]))}if(i+=t.mSelectorText+"{",l.filtersW3C.length>0&&(webkitFilter=mozFilter=oFilter=msFilter=l.filtersW3C.join(" "),l.filtersWebKit&&l.filtersWebKit.length>0&&(webkitFilter=l.filtersWebKit.join(" ")),"undefined"==typeof this._ie&&(i+="-ms-filter:"+msFilter+";"),i+="-webkit-filter:"+webkitFilter+";",i+="-moz-filter:"+mozFilter+";",i+="-o-filter:"+oFilter+";"),l.filtersSVG.length>0)if("none"!=l.filtersSVG[0]){var h=o.replace(/[^a-z0-9]/g,"");if("undefined"==typeof this._svg_cache[h])if(this._svg_cache[h]=this._create_svg(h,l.filtersSVG),"undefined"==typeof XMLSerializer)document.body.appendChild(this._svg_cache[h]);else{var u=new XMLSerializer,d=u.serializeToString(this._svg_cache[h]);-1!=d.search("SourceGraphic")&&document.body.appendChild(this._svg_cache[h])}if("undefined"==typeof XMLSerializer)i+="filter: url(#"+h+")";else{var u=new XMLSerializer,d=u.serializeToString(this._svg_cache[h]);i+=-1!=d.search("SourceGraphic")?"filter: url(#"+h+")":"filter: url('data:image/svg+xml;utf8,"+d+"#"+h+"')"}}else i+="filter: none;";if("undefined"!=typeof this._ie){if(l.filtersIE.length>0){var p=l.filtersIE.join(" ");i+="filter:"+p+";"}if(l.behaviorsIE.length>0){var f=l.behaviorsIE.join(" ");i+="behavior:"+f+";"}}i+="}\r\n"}}return i},scriptpath:t.polyfilter_scriptpath?t.polyfilter_scriptpath:function(){return alert('Please configure the polyfill\'s absolute(!) script path before referencing the css-filters-polyfill.js, like so:\r\nvar polyfilter_scriptpath = "/js/css-filters-polyfill/";'),"./"}(),process:function(){for(var t=new CSSParser,i=0;i<this._stylesheets.length;i++){var n="",s=t.parse(this._stylesheets[i].content,!1,!0);if(null!==s)for(var a in s.cssRules){var o=s.cssRules[a];switch(o.type){default:break;case 1:n+=this._processDeclarations(o);break;case 4:n+="@media "+o.media.join(",")+"{";for(var r in o.cssRules){var l=o.cssRules[r];n+=this._processDeclarations(l)}n+="}"}}var c=document.createElement("style");c.setAttribute("media",this._stylesheets[i].media),"undefined"==typeof e._ie?(c.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(c)):(document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet.cssText=n)}},init:function(){Object.defineProperty&&Object.defineProperty(CSSStyleDeclaration.prototype,"polyfilter",{get:function(){return this.polyfilterStore},set:function(t){values=t.split(/\)\s+/);var i={filtersW3C:[],filtersWebKit:[],filtersSVG:[],filtersIE:[],behaviorsIE:[]};for(idx in values){var n=values[idx]+")";currentproperties=e.convert(n);for(key in currentproperties)"undefined"!=typeof i[key]&&(i[key]=i[key].concat(currentproperties[key]))}if(i.filtersW3C.length>0&&("undefined"==typeof e._ie&&(this.msFilter=i.filtersW3C.join(" ")),this.webkitFilter=this.mozFilter=this.oFilter=i.filtersW3C.join(" ")),i.filtersWebKit.length>0&&(this.webkitFilter=i.filtersWebKit.join(" ")),i.filtersSVG.length>0)if("none"!=i.filtersSVG[0]){var s=t.replace(/[^a-z0-9]/g,"");if("undefined"==typeof e._svg_cache[s])if(e._svg_cache[s]=e._create_svg(s,i.filtersSVG),"undefined"==typeof XMLSerializer)document.body.appendChild(e._svg_cache[s]);else{var a=new XMLSerializer,o=a.serializeToString(e._svg_cache[s]);-1!=o.search("SourceGraphic")&&document.body.appendChild(e._svg_cache[s])}if("undefined"==typeof XMLSerializer)this.filter="url(#"+s+")";else{var a=new XMLSerializer,o=a.serializeToString(e._svg_cache[s]);this.filter=-1!=o.search("SourceGraphic")?"url(#"+s+")":"url('data:image/svg+xml;utf8,"+o+"#"+s+"')"}}else this.filter="none";"undefined"!=typeof e._ie&&(this.filter=i.filtersIE.length>0?i.filtersIE.join(" "):"",this.behavior=i.behaviorsIE.length>0?i.behaviorsIE.join(" "):""),this.polyfilterStore=t}})},convert:function(t){var e=t.match(/none/i);if(null!==e)var i=this.filters.none();var e=t.match(/(grayscale)\(([0-9\.]+)\)/i);if(null!==e)var n=parseFloat(e[2],10),i=this.filters.grayscale(n);var e=t.match(/(sepia)\(([0-9\.]+)\)/i);if(null!==e)var n=parseFloat(e[2],10),i=this.filters.sepia(n);var e=t.match(/(blur)\(([0-9]+)[px]*\)/i);if(null!==e)var n=parseInt(e[2],10),i=this.filters.blur(n);var e=t.match(/(invert)\(([0-9\.]+)\)/i);if(null!==e)var n=parseFloat(e[2],10),i=this.filters.invert(n);var e=t.match(/(brightness)\(([0-9\.]+)%\)/i);if(null!==e)var n=parseFloat(e[2],10),i=this.filters.brightness(n);var e=t.match(/(drop\-shadow)\(([0-9]+)[px]*\s+([0-9]+)[px]*\s+([0-9]+)[px]*\s+([#0-9]+)\)/i);if(null!==e)var s=parseInt(e[2],10),a=parseInt(e[3],10),o=parseInt(e[4],10),r=e[5],i=this.filters.dropShadow(s,a,o,r);return i},filters:{none:function(){var t={};return"undefined"==typeof e._ie?(t.filtersW3C=["none"],t.filtersSVG=["none"]):t.filtersIE=["none"],t},grayscale:function(t){t=t||0;var i={};if("undefined"==typeof e._ie){i.filtersW3C=["grayscale("+t+")"];var n=e._create_svg_element("feColorMatrix",{type:"matrix",values:.2126+.7874*(1-t)+" "+(.7152-.7152*(1-t))+" "+(.0722-.0722*(1-t))+" 0 0 "+(.2126-.2126*(1-t))+" "+(.7152+.2848*(1-t))+" "+(.0722-.0722*(1-t))+" 0 0 "+(.2126-.2126*(1-t))+" "+(.7152-.7152*(1-t))+" "+(.0722+.9278*(1-t))+" 0 0 0 0 0 1 0"});i.filtersSVG=[n]}else i.filtersIE=t>=.5?["gray"]:[];return i},sepia:function(t){t=t||0;var i={};if("undefined"==typeof e._ie){i.filtersW3C=["sepia("+t+")"];var n=e._create_svg_element("feColorMatrix",{type:"matrix",values:.393+.607*(1-t)+" "+(.769-.769*(1-t))+" "+(.189-.189*(1-t))+" 0 0 "+(.349-.349*(1-t))+" "+(.686+.314*(1-t))+" "+(.168-.168*(1-t))+" 0 0 "+(.272-.272*(1-t))+" "+(.534-.534*(1-t))+" "+(.131+.869*(1-t))+" 0 0 0 0 0 1 0"});i.filtersSVG=[n]}else i.filtersIE=t>=.5?["gray","progid:DXImageTransform.Microsoft.Light()"]:[],i.behaviorsIE=t>=.5?['url("'+e.scriptpath+'htc/sepia.htc")']:[];return i},blur:function(t){t=Math.round(t)||0;var i={};if("undefined"==typeof e._ie){i.filtersW3C=["blur("+t+"px)"];var n=e._create_svg_element("feGaussianBlur",{"in":"SourceGraphic",stdDeviation:t});i.filtersSVG=[n]}else i.filtersIE=["progid:DXImageTransform.Microsoft.Blur(pixelradius="+t+")"];return i},invert:function(t){t=t||0;var i={};if("undefined"==typeof e._ie){i.filtersW3C=["invert("+t+")"];var n=e._create_svg_element("feComponentTransfer",{}),s=e._create_svg_element("feFuncR",{type:"table",tableValues:t+" "+(1-t)});n.appendChild(s);var s=e._create_svg_element("feFuncG",{type:"table",tableValues:t+" "+(1-t)});n.appendChild(s);var s=e._create_svg_element("feFuncB",{type:"table",tableValues:t+" "+(1-t)});n.appendChild(s),i.filtersSVG=[n]}else i.filtersIE=t>=.5?["invert"]:[];return i},brightness:function(t){t=t||0;var i={};if("undefined"==typeof e._ie){i.filtersW3C=["brightness("+t+"%)"],i.filtersWebKit=["brightness("+(t-100)+"%)"];var n=e._create_svg_element("feComponentTransfer",{}),s=e._create_svg_element("feFuncR",{type:"linear",slope:t/100});n.appendChild(s);var s=e._create_svg_element("feFuncG",{type:"linear",slope:t/100});n.appendChild(s);var s=e._create_svg_element("feFuncB",{type:"linear",slope:t/100});n.appendChild(s),i.filtersSVG=[n]}else i.filtersIE=["progid:DXImageTransform.Microsoft.Light()"],i.behaviorsIE=['url("'+e.scriptpath+'htc/brightness.htc")'];return i},dropShadow:function(t,i,n,s){t=Math.round(t)||0,i=Math.round(i)||0,n=Math.round(n)||0,s=s||"#000000";var a={};if("undefined"==typeof e._ie){a.filtersW3C=["drop-shadow("+t+"px "+i+"px "+n+"px "+s+")"];var o=e._create_svg_element("feGaussianBlur",{"in":"SourceAlpha",stdDeviation:n}),r=e._create_svg_element("feOffset",{dx:t+1,dy:i+1,result:"offsetblur"}),l=e._create_svg_element("feFlood",{"flood-color":s}),c=e._create_svg_element("feComposite",{in2:"offsetblur",operator:"in"}),h=e._create_svg_element("feMerge",{}),u=e._create_svg_element("feMergeNode",{});h.appendChild(u);var u=e._create_svg_element("feMergeNode",{"in":"SourceGraphic"});h.appendChild(u),a.filtersSVG=[o,r,l,c,h]}else a.filtersIE=["progid:DXImageTransform.Microsoft.Glow(color="+s+",strength=0)","progid:DXImageTransform.Microsoft.Shadow(color="+s+",strength=0)"],a.behaviorsIE=['url("'+e.scriptpath+'htc/drop-shadow.htc")'];return a}}};t.jQuery?t.jQuery(document).ready(function(){e.process_stylesheets()}):t.contentLoaded?contentLoaded(t,function(){e.process_stylesheets()}):t.addEventListener?document.addEventListener("DOMContentLoaded",function(){e.process_stylesheets()},!1):t.attachEvent&&t.attachEvent("onload",function(){e.process_stylesheets()}),e.init()}(window);